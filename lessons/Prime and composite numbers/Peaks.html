<!DOCTYPE html>
<html>
  <head> </head>
  <body></body>

  <script>
    function solution(N) {
      let len = N.length;
      if (len < 3) return 0;
      let arr = [];

      for (let i = 1; i < len - 1; i++) {
        if (N[i] > N[i - 1] && N[i] > N[i + 1]) {
          arr.push(i);
        }
      }

      let lenArr = arr.length;

      for (let i = lenArr; i > 0; i--) {
        if (len % i === 0) {
          let j = 0;
          let division = Math.round(len / i);
          let k = division;

          while (j < lenArr && division < len) {
            if (arr[j] < division && arr[j] >= division - k) {
              division += k;
            }
            j++;
          }
          if (division >= len) {
            return i;
          }
        }
      }
      return 0;
    }

    console.log(solution([1, 2, 3, 4, 1, 2, 3, 4, 6, 2]));
  </script>
</html>